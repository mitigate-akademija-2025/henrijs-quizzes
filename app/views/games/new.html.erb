<%= form_with url: quiz_games_path(@quiz), method: :post, class: "space-y-5" do %>

  <% @quiz.questions.each_with_index do |q, i| %>
    <section class="bg-white border border-gray-200 rounded-xl p-5 shadow-sm">
      
      <div class="flex items-start gap-3">
        <h2 class="font-semibold text-gray-800 mb-4 flex-1">
          <span class="text-gray-500 mr-2"><%= i + 1 %>.</span>
          <%= q.content %>
        </h2>

        <!-- Points chip -->
        <span class="ml-3 mt-0.5 inline-flex items-center gap-1.5 rounded-full 
                    bg-gradient-to-br from-amber-50 to-orange-50 text-amber-800 
                    px-2.5 py-1 text-xs font-medium ring-1 ring-inset ring-amber-200">
          <!-- tiny diamond -->
          ðŸ’Ž <span class="tabular-nums"><%= q.points %></span>
        </span>
      </div>

      <% if q.is_a?(ChoiceQuestion) %>
        <% single = (q.max_selections == 1) %>

        <!-- Options grid -->
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
          <% q.options.each do |opt| %>
            <label class="group relative cursor-pointer">
              <% if single %>
                <!-- radio (single-select) -->
                <input type="radio"
                       name="answers[<%= q.id %>]"
                       value="<%= opt.id %>"
                       class="peer sr-only">
              <% else %>
                <!-- checkbox (multi-select) -->
                <input type="checkbox"
                       name="answers[<%= q.id %>][]"
                       value="<%= opt.id %>"
                       class="peer sr-only">
              <% end %>

              <div class="rounded-xl border border-gray-200 bg-gray-50 px-4 py-3 text-gray-800
                          group-hover:bg-gray-100 transition
                          peer-checked:bg-blue-600 peer-checked:text-white peer-checked:border-blue-600
                          shadow-sm">
                <%= opt.content %>
              </div>
            </label>
          <% end %>
        </div>

      <% elsif q.is_a?(TextQuestion) %>
        <!-- Text input -->
        <div class="mt-2">
          <label class="block text-sm text-gray-600 mb-1">Your answer</label>
          <input type="text"
                 name="text_answers[<%= q.id %>]"
                 class="w-full rounded-xl border border-gray-300 px-4 py-2 shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                 autocomplete="off"
                 placeholder="Type your answerâ€¦">
        </div>
      <% end %>
    </section>
  <% end %>

  <div class="pt-2">
    <button class="w-full sm:w-auto bg-blue-600 hover:bg-blue-700 text-white font-medium px-6 py-2.5 rounded-xl shadow-sm transition">
      Submit
    </button>
  </div>
<% end %>
