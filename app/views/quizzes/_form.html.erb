<%= form_with(model: quiz) do |f| %>
  <% if quiz.errors.any? %>
    <div class="mb-6 rounded border border-red-300 bg-red-50 p-3 text-red-800">
      <p class="font-semibold mb-1"><%= pluralize(quiz.errors.count, "error") %> prevented saving:</p>
      <ul class="list-disc list-inside">
        <% quiz.errors.full_messages.each do |msg| %><li><%= msg %></li><% end %>
      </ul>
    </div>
  <% end %>

  <!-- Quiz fields -->
  <div class="grid gap-4 mb-8 ">
    <div class="rounded border border-gray-200 bg-white p-4 shadow-sm">
      <%= f.label :title, class: "block text-sm font-medium text-gray-700 mb-1" %>
      <%= f.text_field :title, class: "w-full rounded border border-gray-200 p-3" %>
    </div>
    <div class="rounded border border-gray-200 bg-white p-4 shadow-sm">
      <%= f.label :description, class: "block text-sm font-medium text-gray-700 mb-1" %>
      <%= f.text_area :description, rows: 4, class: "w-full rounded border border-gray-200  p-3" %>
    </div>
  </div>

  <!-- Questions -->
  <h2 class="text-xl font-semibold mb-3">Questions & Quoptions</h2>
  <div class="space-y-6">
    <% quiz.questions.each_with_index do |question, i| %>
      <%= f.fields_for :questions, question, child_index: i do |qf| %>
        <%= render "question_fields", f: qf, question_index: i %>
      <% end %>
    <% end %>
  </div>

  <!-- Action buttons -->
  <div class="mt-6 flex items-center gap-3">
    <%= submit_tag "Add Question",
          name: "add_question",
          class: "bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded shadow" %>

    <%= f.submit "Save Changes",
          class: "bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded shadow" %>

    
  </div>
<% end %>
