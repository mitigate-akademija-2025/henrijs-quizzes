<%= form_with model: quiz do |f| %>
  <div class="space-y-6">
    <div class="space-y-1.5">
      <h3 class="text-base font-semibold text-gray-900">Title</h3>
      <%= f.text_field :title,
            placeholder: "Give your quiz a short, clear title",
            class: "w-full rounded-xl border border-gray-300 bg-white/90 px-3 py-2.5 shadow-sm
                    placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500/60 focus:border-blue-500" %>
    </div>

    <div class="space-y-1.5">
      <h3 class="text-base font-semibold text-gray-900">Description</h3>
      <%= f.text_area :description, rows: 3,
            placeholder: "Describe what the quiz is about",
            class: "w-full rounded-xl border border-gray-300 bg-white/90 px-3 py-2.5 shadow-sm
                    placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500/60 focus:border-blue-500
                    min-h-[120px] resize-y" %>
    </div>

    <div data-controller="nested" data-nested-index-value="<%= f.object.questions.size %>">
      <h3 class="text-base font-semibold text-gray-900">Questions</h3>

      <div id="questions" data-nested-target="list" class="mt-3 space-y-4">
        <%= f.fields_for :questions do |qf| %>
          <%= render "questions/fields", f: qf %>
        <% end %>
      </div>

      <template data-nested-target="template">
        <%= f.fields_for :questions, Question.new, child_index: "NEW_Q" do |qf| %>
          <%= render "questions/fields", f: qf, new_record: true %>
        <% end %>
      </template>

      <div class="mt-6 flex items-center justify-end gap-3">
        <button type="button"
                class="p-2 rounded-lg border bg-blue-500 px-4 py-2 hover:bg-blue-600 text-white"
                data-action="nested#addQuestion"
                title="Add question" aria-label="Add question">
          Add Question
        </button>

        <%= f.submit (f.object.persisted? ? "Save changes" : "Create quiz"),
              class: "rounded-lg bg-green-600 px-4 py-2 text-white hover:bg-green-700" %>
      </div>
    </div>
  </div>
<% end %>
