<section class="bg-gradient-to-r from-violet-500 to-purple-600 text-white rounded-2xl p-6 mb-8 shadow">
  <div class="flex items-center justify-between gap-4">
    <div>
      <h1 class="text-3xl font-semibold">Quizzes</h1>
      <p class="text-violet-100 mt-1">Izvēlies testu un sāc spēli!</p>
    </div>

    <% if user_signed_in? %>
      <%= link_to "Create Quiz", new_quiz_path,
            class: "inline-flex items-center gap-2 bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-xl shadow-sm transition" %>
    <% else %>
      <%= link_to "Sign in", new_user_session_path,
            class: "inline-flex items-center gap-2 bg-white text-black px-4 py-2 rounded-xl shadow-sm hover:bg-gray-100 transition" %>
    <% end %>
  </div>
  <div class="mt-6">
    <%= form_with url: quizzes_path, method: :get, local: true, class: "relative w-full md:max-w-xl" do |form| %>
      <%= form.text_field(
            :search,
            value: params[:search],
            id: "search",
            placeholder: "Search quizzes…",
            class: "h-12 w-full rounded-xl pl-11 pr-28 bg-white/20 backdrop-blur placeholder-white/70 text-white ring-1 ring-white/30 focus:ring-2 focus:ring-white/70 shadow-sm outline-none transition"
          ) %>

      <% if params[:search].present? %>
        <%= link_to quizzes_path,
              class: "absolute right-24 top-1/2 -translate-y-1/2 text-white/80 hover:text-white focus:outline-none" do %>
          <%= heroicon "x-mark", variant: :outline, options: { class: "h-6 w-6" } %>
        <% end %>
      <% end %>

      <%= form.submit "Search",
            name: nil,
            class: "absolute right-2 top-1/2 -translate-y-1/2 bg-white text-black font-medium px-4 py-2 rounded-lg shadow-sm hover:shadow-md hover:bg-gray-100 transition" %>
    <% end %>
  </div>


</section>

<% if @quizzes.any? %>
  <%= turbo_stream_from "quizzes" %>
  <ul id="quizzes" class="grid gap-5 md:grid-cols-2">
    <%= render @quizzes %>
  </ul>

<% else %>
  <div class="rounded-2xl border border-dashed border-gray-300 bg-white p-8 text-center">
    <h2 class="text-lg font-semibold text-gray-800">No matching quizzes</h2>
    <p class="text-gray-600 mt-1">Be the first to create one and challenge others.</p>
    <% if user_signed_in? %>
      <%= link_to "Create quiz", new_quiz_path,
            class: "inline-block mt-4 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg shadow-sm" %>
    <% end %>
  </div>
<% end %>
